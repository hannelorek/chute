<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">

<head>
  <link rel="shortcut icon" href="favicon.ico" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>
    Chute!
  </title>
  <link crossorigin="anonymous" media="all" rel="stylesheet" href="./style.css" />
</head>

<body>
  <div id="svg_container"></div>
  <div id="svg_caption"></div>
  <script src="js/qrcode.min.js"></script>

<script>
const randomString = generateRandomString(32);
const currentUrl = window.location.href; // Get the current webpage URL
const svgUrl = currentUrl + "?key=" + encodeURIComponent(randomString); // Concatenate the random string with the URL
const qrcode = new QRCode({
  content: svgUrl,
  container: "svg-viewbox", // Responsive use
  join: true                // Crisp rendering and 4-5x reduced file size
});
var svg = qrcode.svg();
document.getElementById("svg_container").innerHTML = svg;
document.getElementById("svg_caption").innerHTML = svgUrl;



function generateRandomString(length) {
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    let result = '';
    for (let i = 0; i < length; i++) {
        const randomIndex = Math.floor(Math.random() * characters.length);
        result += characters[randomIndex];
    }
    return result;
}


</script> 
</body>

</html>
